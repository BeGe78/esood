<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="file_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-ESoOD+Economical+Statistics+on+Open+Data">ESoOD Economical Statistics on Open Data</h1>

<p><a href="https://bege.hd.free.fr"><img
src="http://img.shields.io/badge/home-ESoOD-blue.svg"></a> <a
href="https://github.com/BeGe78/esood"><img
src="http://img.shields.io/badge/github-ESoOD-yellow.svg"></a> <a
href="https://bege.hd.free.fr/docs/"><img
src="http://img.shields.io/badge/docs-yard-green.svg"></a> <a
href="http://github.com/BeGe78/esood/releases"><img
src="http://img.shields.io/badge/releases-ESoOD-orange.svg"></a> <a
href="https://bege.hd.free.fr/docs/file.LICENSE.html"><img
src="http://img.shields.io/badge/license-GNU-red.svg"></a></p>

<h2 id="label-Preamble">Preamble</h2>

<p><strong>ESoOD</strong> is a Ruby on Rails application providing statistical
graph and analysis relative to the World Bank Open Data set.<br> The site
supports two languages: <em>en</em> and <em>fr</em>.<br> It is licensed
with a GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007.<br> Sources are
hosted on <a href="https://github.com/BeGe78/esood">github</a> .<br> The
documentation is accessible on the <a
href="https://bege.hd.free.fr/docs/">server site itself</a>.</p>

<h2 id="label-Infrastructure">Infrastructure</h2>

<p>The project is developed on Linux FEDORA 24 64 bit and runs in production
on Linux FEDORA 24 32 bit with a mysql databse.<br> Gems list can be found
in Gemfile.<br> <strong>ESoOD</strong> is developed with:<br> - Ruby
2.2.1<br> - Rails 4.2.5</p>

<h2 id="label-Dependencies">Dependencies</h2>

<p>A Stripe account is needed for the billing/invoice process.<br> Google
analytics is used to get the web site statistics and you need a
GA.tracker.<br> You need to set your own SSL certificates if you want to
use HTTPS.<br> R libraries for statistics with the package Rserve
(<em>install.packages(“Rserve”)</em>) and Rgraph for charts need to be
installed independently.<br> You need to modify the Terms &amp; Conditions
to adapt to your own case. The files are located at:<br>
<em>YOUR_DIRECTORY/app/views/devise/registrations/_cgu1.en.html.erb</em>
for english version<br>
<em>YOUR_DIRECTORY/app/views/devise/registrations/_cgu1.fr.html.erb</em>
for the french version</p>

<h2 id="label-Configuration">Configuration</h2>

<p>Development, test and production rails configuration files must be adapted
to your case mainly for mail and googe analytics.<br> If you need to add a
language, all the language files are under <em>config/locales</em>.<br>
Stripe account parameters should be adapted to link the stripe webhooks to
your site. The path is: <em>YOURSITE/stripe/webhook</em>.__ The following
ENV variables need to be initialised in
<em>YOURDIRECTORY/config/applcation.yml</em> file:<br> GMAIL_DOMAIN,
GMAIL_USER, GMAIL_PASSWORD, GA_TRACKER, PUBLISHABLE_KEY, SECRET_KEY,
STRIPE_PUBLISHABLE_KEY, STRIPE_SECRET_KEY, SECRET_KEY_BASE.</p>

<h2 id="label-Database+initialisation">Database initialisation</h2>

<p>Some tables need to be fed. You can find example data under
<em>YOURSITE/test/factories</em>.<br> First you need to create an admin
role and at least one user with this role. Then you can login with this
user and feed the other tables. You have to initialize the following
tables:<br> - role<br> - user<br> - plan<br> - country<br> - indicator</p>

<h2 id="label-Tests+and+documentation">Tests and documentation</h2>

<p>To test models, controllers and integration just run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rake'>rake</span> <span class='id identifier rubyid_test'>test</span>
</code></pre>

<p>It happens that some integration tests may fail (typically login, logon or
profile test) due to time out reason. If you run them several time, they
shoud pass successfully.<br> To generate the documentation with yard just
run:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_yard'>yard</span> <span class='id identifier rubyid_doc'>doc</span>
</code></pre>

<p>The options of yard are included in the <em>.yardopts</em> file. Note that
the controllers, the models and the tests are documented. The controllers
documents include the UML class graph.</p>

<h2 id="label-Deployment">Deployment</h2>

<p>To deploy for production, I use PhusionPassenger standalone on a nginx
server and I follow this <a
href="https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/standalone/oss/deploy_app_main.html">tutorial</a>
.<br> As examples, I have copied extracts of my <em>Passenger</em> and
<em>nginx</em> configuration files.</p>

<h2 id="label-Contact">Contact</h2>

<p>You can contact me by <a href="mailto:bgardin@gmail.com">mail</a>.</p>
<hr>
</div></div>

      <div id="footer">
  Generated on Wed Oct 12 10:25:46 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.2 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>